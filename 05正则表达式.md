## 一.正则表达式概述

```
安装RegExpBuddy软件--专门测试正则表达式是否正确的软件
```

```
正则表达式(Regular Expression):专门描述字符串中字符出现规则的表达式

正则表达式可用于:
	1.验证字符串格式
	2.查找敏感词
```

## 二.定义正则表达式

### 1.字符集[ ]

```
字符集是规定一位字符上多种备选字的列表,只要规则中某一位字符上有多种备选字,就用字符集[]
简写: 如果[]中部分备选字符连续,可用-省略中间字符

例如: 我[草艹操]

练习: 定义一个规则同时匹配“我草” ，“我艹” ，“我槽” 三种敏感词
	 我[草艹槽]
扩展：修改规则，使其进一步匹配“卧槽”
	  [我卧][草艹槽]

手机号规则(简写):
	第一位: 1
	第二位: 3,4,5,6,7,8,9中的一位
	后九位:0,1,2,3,4,5,6,7,8,9十个数字中的一个
	1[3-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]
其他简写:
	要匹配一位小写字母: [a-z] 共26个
	要匹配一位大写字母: [A-Z] 共26个
	要匹配一位字母: [A-Za-z]  共52个
	要匹配一位字母或数字: [0-9A-Za-z] 共62个
	要匹配一位汉字: [\u4e00-\u9fa5]
				  19968~40869 共20902个
				  "一"   "龥"
车牌号规则:
	第一位: 一位汉字
	第二位: 一位大写字母
	第三位: ·
	后五位: 每一位都是一个大写字母或数字
	[\u4e00-\u9fa5][A-Z]·[0-9A-Z][0-9A-Z][0-9A-Z][0-9A-Z][0-9A-Z]
```

### 2.预定义字符集

```
正则表达式语法为四种最常用的字符集定义了最简化写法,称为预定义字符集
1.要匹配一位数字: \d 等效于 [0-9]
2.要匹配一位字母,数字或者_: \w 等效于 [0-9A-Za-z_]
3.要匹配一位空字符: \s可匹配空格,制表符Tab等空白
4.要匹配所有文字(通配符): .

手机号规则(进一步简写):
	1[3-9]\d\d\d\d\d\d\d\d\d
```

### 3.数量词

```
数量词:专门规定一个字符集出现次数的规则

手机号规则再进一步简写:
	1[3-9]\d{9}
车牌号规则进一步简写
	[\u4e00-\u9fa5][A-Z]·[0-9A-Z]{5}
```

#### 1)有明确数量边界的数量词

```
①字符集{n} 表示字符集必须重复n次,不能多也不能少
②字符集{n,m} 表示字符集至少重复n次,最多重复m次	比如:\d{4,6}表示4到6位数字
③字符集{n,} 表示字符集匹配的内容至少重复n次,多了不限	比如:\d{6,}表示6位以上数字
```

#### 2)没有明确数量边界的数量词

```
* 可有可无,多了不限 0个或多个
? 可有可无,最多一次 0个或1个
+ 至少一次,多了不限 1个或多个
```

```
练习:匹配手机短信中的验证码: 连续4位~6位数字
	\d{4,6}
练习:匹配字符串中的一组连续空字符
	\s+
```

### 4.选择和分组

#### 1)选择

```
问题分析: 屏蔽敏感词时,把中文换成拼音就查不出来了
错误做法: 直接将拼音放入[]中作为字符集中的备选 比如[草cao]
正确做法: 选择(在多个子规则中选其一匹配)
写法: 子规则1 | 子规则2
读作: 满足规则1 或 满足规则2
"|" 选择符只分左右,不考虑单个字符  
练习:匹配一个“草” 字或“cao”这个拼音
	草 | cao 
```

#### 2)分组

```
将多个子规则视为一组,再和分组外的规则匹配
写法: 其他规则(多个子规则)
练习:匹配"我草"或"我cao"
	我(草|cao)
```

```
练习:同时验证同音字或拼音
	我([草艹操]|cao)
	
练习："我" 字也可能是"卧"或"wo"
	([我卧]|wo)([草艹操]|cao)
	
练习:可能在中间加不确定个数的空字符
	([我卧]|wo)\s*([草艹操]|cao)
	
练习: 定义完整的手机号规则:
	+86或0086
	(\+86|0086) --> +是正则中有功能的特殊符号,可是这里不希望+当作特殊功能使用,只当作普通字符匹配,所以用\+阻止正则解析
	((\+86|0086)\s+)?1[3-9]\d{9}

练习: 定义完整的身份证号规则
	15位数字:\d{15}
	2位数字: \d\d
	最后一位: 1位数字或x:[0-9x]
	(最后三位是可有可无的,最多一次) ?
		\d{15}(\d\d[0-9x])?
```

### 5.指定匹配位置

```
一个字符串中三个位置比较特殊
	- 1.字符串开头
	- 2.字符串结尾
	- 3.英文句子中的每个单词中间的留白位置
	
	如果只希望匹配特殊位置上的关键词时,就可以用特殊符号表示特殊位置:
	- 1. ^ 表示字符串开头
	- 2. $ 表示字符串结尾
	- 3. \b表示单词边界,可匹配: 空格,标点符号,字符串开头和结果等可将一个单词与其他单词分隔开的符号
```

```
练习:
1.匹配任意一组连续的空字符
	\s+
2.仅匹配开头的空字符
	^\s+
3. 仅匹配结尾的空字符
	\s+$
4. 同时匹配开头和结尾的空字符：
	错误写法: ^\s+$
	正确写法: ^\s|\s$
5.找到每个单词首字母
	\b[a-z]
	注意:只写\b什么也匹配不到,因为\b是"零宽",只匹配位置,不匹配字符
```

```
面试题:
	使用正则匹配电子邮件
		\w+@\w+\.\w+(\.cn)?
```

## 三.总结

```
1.最简单的正则: 一个关键字原文
2.如果某一位上的字符有多种备选字时使用字符集 []
3.如果[ ]中部分字符是连续的可以使用"-" [x-x]
4.常用的字符集简写:
	[0-9]	[a-z]	[A-Z]
	[A-Za-z] [0-9A-Za-z]
	[\u4e00-\u9fa5]
5.量词
	Ⅰ {n} 必须n个
	   {n,m} 至少n个,最多m个
	   {n,} 至少n个,多了不限
	Ⅱ  * 0个或多个
	    + 1个或多个
	    ? 0个或1个
6. 两个规则二选一匹配: "|"
7.将多个字规则分为一组先匹配,再和其他规则联合匹配: ()
8.位置:
	^ 开头
	$ 结尾
	\b 单词边界
```



